<style>

.tooltip.top .tooltip-arrow {
  border-top-color: #EDEDED;
}

.tooltip.right .tooltip-arrow {
  border-right-color: #EDEDED;
}

.tooltip.bottom .tooltip-arrow {
  border-bottom-color: #EDEDED;
}

.tooltip.left .tooltip-arrow {
  border-left-color: #EDEDED;
}
.tooltip-inner {
    max-width: 900px;
    min-width: 300px;
    color: #000;
    text-align: lseft;
    background-color: #EDEDED;
    border-radius: 3px;
    border: 1px solid #ccc;
    box-shadow: 5px 5px 0.5em -0.1em rgba(0,0,6,0.5);
}
</style>
<div>
 <a href="https://telegram.org/">
	<img src="<#ROOTHTML#>img/modules/telegram.png"  width="24" height="24">Telegram
 </a>&nbsp;
 <a class="btn btn-default" href="#api_settings" data-toggle="collapse"><i class="glyphicon glyphicon-cog"></i> <#LANG_SETUP#></a>
    &nbsp;&nbsp;&nbsp;
	[#if CYCLERUN==1#]
		<span class="label label-success" title="Статус цикла">Цикл запущен</span>
	[#else#]
		<span class="label label-danger" title="Статус цикла">Цикл остановлен</span>
	[#endif#]
    &nbsp;&nbsp;&nbsp;
    <span tabindex="0" data-toggle="tooltip" data-html="true" data-placement="right" 
            data-title="
            <div class='float-right'>
            <img src='<#ROOTHTML#>cms/cached/telegram/[#BOT_ID#].jpg' height='80px' onerror='this.src='<#ROOTHTML#>templates/telegram/img/none.jpg''>
            </div>
            <p style='text-align:left'>ID:<b>[#BOT_ID#]</b><br>
                        Name:<b>[#BOT_NAME#]</b><br>
                        Username:<b>[#BOT_USERNAME#]</b><br>
                        Can join group:[#if BOT_JOIN_GROUP==1#]<span class='glyphicon glyphicon-ok-circle text-success'></span>
                            [#else#]<span class='glyphicon glyphicon-remove-circle text-danger'></span>[#endif#]<br>
                        Can read group:[#if BOT_READ_GROUP==1#]<span class='glyphicon glyphicon-ok-circle text-success'></span>
                            [#else#]<span class='glyphicon glyphicon-remove-circle text-danger'></span>[#endif#]<br>
                        Support inline:[#if BOT_SUPPORT_INLINE==1#]<span class='glyphicon glyphicon-ok-circle text-success'></span>
                            [#else#]<span class='glyphicon glyphicon-remove-circle text-danger'></span>[#endif#]</p>">
        <img src="<#ROOTHTML#>cms/cached/telegram/[#BOT_ID#].jpg" height="35px" style="border-radius: 0 50% 50%;" onerror="this.src='<#ROOTHTML#>templates/telegram/img/none.jpg'">
    </span>
    &nbsp;<b>[#BOT_NAME#]</b>
	<button class="btn btn-primary btn-sm float-right" data-toggle="modal" data-target="#about"><#LANG_ABOUT#>&nbsp;&nbsp;<span class="glyphicon glyphicon-info-sign icon-white"></span>
	</button>
</div>

<div class="collapse" id='api_settings'>&nbsp;
<form action="?" method="post" enctype="multipart/form-data" name="frmEdit" class="form-horizontal">
<fieldset>
<div class="form-group">
 <label class="col-lg-4 control-label"><#LANG_TLG_TOKEN#>
 <span data-toggle="tooltip" data-html="true" data-placement="right" data-title="<#LANG_HELP_TOKEN#>">
    <i class="glyphicon glyphicon-info-sign text-primary"></i>
 </span>
</label>
 <div class="col-lg-6"><input class="form-control" type="text" name="tlg_token" value="<#TLG_TOKEN#>" class="input"></div>
</div>
<div class="form-group">
 <label class="col-lg-4 control-label"><#LANG_TLG_STORAGE_PATH#>
 <span data-toggle="tooltip" data-placement="right" data-title="<#LANG_HELP_STORAGE#>">
 <i class="glyphicon glyphicon-info-sign text-primary"></i>
 </label>
 <div class="col-lg-6"><input class="form-control" type="text" name="tlg_storage" value="<#TLG_STORAGE#>" class="input"></div>
</div>
<div class="form-group">
 <label class="col-lg-4 control-label"><#LANG_TLG_COUNT_ROW#>
 <span data-toggle="tooltip" data-placement="right" data-title="<#LANG_HELP_COUNTROW#>">
 <i class="glyphicon glyphicon-info-sign text-primary"></i>
 </label>
 <div class="col-lg-6"><input class="form-control" type="number" name="tlg_count_row" value="<#TLG_COUNT_ROW#>" class="input"></div>
</div>
<div class="form-group">
 <label class="col-lg-4 control-label"><#LANG_TLG_PLAYER#></label>
 <div class="col-lg-6">
    <select name="tlg_player" class="form-control" id="tlg_player">
		<option value="1"[#if TLG_PLAYER=="1"#] selected[#endif#]>playSound</option>
		<option value="2"[#if TLG_PLAYER=="2"#] selected[#endif#]>playMedia</option>
	</select>
 </div>
</div>
<div class="form-group">
 <label class="col-lg-4 control-label"><#LANG_TLG_TIMEOUT#>
 <span data-toggle="tooltip" data-placement="right" data-title="<#LANG_HELP_TIMEOUT#>">
 <i class="glyphicon glyphicon-info-sign text-primary"></i>
 </label>
 <div class="col-lg-6"><input class="form-control" type="number" name="tlg_timeout" value="<#TLG_TIMEOUT#>" class="input"></div>
</div>
<div class="form-group">
 <label class="control-label"><#LANG_TLG_REG_USER#>
 <span data-toggle="tooltip" data-placement="right" data-title="<#LANG_HELP_REG_USER#>">
 <i class="glyphicon glyphicon-info-sign text-primary"></i>
 </label>
 <div class="controls"><input type="checkbox" name="tlg_reg_user" value="1"[#if TLG_REG_USER="1"#] checked[#endif#]></div>
</div>
<div class="form-group">
 <label class="control-label"><#LANG_TLG_HISTORY_ONLY_ERRORS#>
 </label>
 <div class="controls"><input type="checkbox" name="tlg_history_only_errors" value="1"[#if HISTORY_ONLY_ERRORS="1"#] checked[#endif#]></div>
</div>
<div class="form-group">
 <label class="control-label"><#LANG_TLG_HISTORY_DAYS#>
 </label>
 <div class="col-lg-6"><input class="form-control" type="number" name="tlg_history_days" value="<#HISTORY_DAYS#>" class="input"></div>
</div>
<div class="form-group">
 <label class="control-label">Save Unicode
 </label>
 <div class="col-lg-6">
 [#if SUPPORT_UNICODE==true#]
 <input type="checkbox" name="tlg_save_unicode" value="1"[#if SAVE_UNICODE="1"#] checked[#endif#]>
 [#else#]
 Not supported
 [#endif#]
 </div>
</div>
<script type="text/javascript">
	function showInfo(){  
	    var url="?webhookinfo=1";
		$.ajax({  
			url: url,  
			cache: false,  
			success: function(html){  
				$("#info").html(html);  
			}  
		});  
	}  
	function setWebHook(){  
		var webhook_url = document.getElementsByName('tlg_webhook_url')[0].value;
		webhook_url = encodeURIComponent(webhook_url);
	    var webhook_cert = document.getElementsByName('tlg_webhook_cert')[0].value;
		webhook_cert = encodeURIComponent(webhook_cert);
	    var url="?setwebhook=1&tlg_webhook_url="+webhook_url+"&tlg_webhook_cert="+webhook_cert;
		$.ajax({  
			url: url,  
			cache: false,  
			success: function(html){  
				$("#info").html(html);  
			}  
		});  
	}  
	function cleanWebHook(){  
	    var url="?cleanwebhook=1";
		$.ajax({  
			url: url,  
			cache: false,  
			success: function(html){  
				$("#info").html(html);  
			}  
		});  
	}  
    $(function () {
        // инициализация всплывающих подсказок
        $('[data-toggle="tooltip"]').tooltip({
            delay: { show: 0, hide: 100 }
        });
    });
</script> 
<div class="form-group">
 <label class="control-label"><#LANG_TLG_USE_WEBHOOK#></label>
 <div class="controls"><input type="checkbox" id="tlg_webhook" name="tlg_webhook" data-toggle="collapse" data-target="#webhook_settings" value="1"[#if TLG_WEBHOOK="1"#] checked[#endif#]></div>
</div>
<div class='collapse [#if TLG_WEBHOOK="1"#] in[#endif#]' id='webhook_settings'>
<div class="form-group">
 <label class="col-lg-4 control-label"><#LANG_TLG_WEBHOOK_URL#></label>
  <div class="col-lg-6">
	<input class="form-control" type="text" name="tlg_webhook_url" value="<#TLG_WEBHOOK_URL#>" class="input">
 </div>
	<small class="text-muted">/webhook_telegram.php</small>
</div>
<div class="form-group">
 <label class="col-lg-4 control-label"><#LANG_TLG_PATH_CERT#></label>
 <div class="col-lg-6">
	<input class="form-control" type="text" name="tlg_webhook_cert" value="<#TLG_WEBHOOK_CERT#>" class="input"></br>
	 <button onclick="setWebHook();return false;" class="btn btn-default">
		<i class="glyphicon glyphicon-plus-sign"></i> <#LANG_TLG_WEBHOOK_SET#></button>
	 <button onclick="cleanWebHook();return false;" class="btn btn-default">
		<i class="glyphicon glyphicon-remove-sign"></i> <#LANG_TLG_WEBHOOK_CLEAN#></button>
	 <button onclick="showInfo();return false;" class="btn btn-default">
		<i class="glyphicon glyphicon-info-sign text-primary"></i> <#LANG_TLG_WEBHOOK_INFO#></button></br>
    <div id="info"></div>
 </div>
</div>
</div>
<div class="form-group">
 <label class="control-label"><#LANG_TLG_USE_PROXY#>
 <span data-toggle="tooltip" data-placement="right" data-title="<#LANG_HELP_USE_PROXY#>">
 <i class="glyphicon glyphicon-info-sign text-primary"></i>
 </label>
 <div class="controls"><input type="checkbox" id="tlg_useproxy" name="tlg_useproxy" data-toggle="collapse" data-target="#proxy_settings" value="1"[#if TLG_USEPROXY="1"#] checked[#endif#]></div>
</div>
<div class='collapse [#if TLG_USEPROXY="1"#] in[#endif#]' id='proxy_settings'>
<div class="form-group">
 <label class="col-lg-4 control-label"><#LANG_TLG_PROXY_TYPE#></label>
  <div class="col-lg-6">
	<select name="tlg_proxy_type" class="form-control" id="tlg_proxy_type">
		<option value="1"[#if TLG_PROXY_TYPE=="1"#] selected[#endif#]>HTTP</option>
		<option value="2"[#if TLG_PROXY_TYPE=="2"#] selected[#endif#]>SOCKS5</option>
		<option value="3"[#if TLG_PROXY_TYPE=="3"#] selected[#endif#]>SOCKS5 HOSTNAME</option>
		<option value="4"[#if TLG_PROXY_TYPE=="4"#] selected[#endif#]>HTTPS</option>
	</select>
 </div>
</div>
<div class="form-group">
 <label class="col-lg-4 control-label"><#LANG_TLG_PROXY_URL#></label>
  <div class="col-lg-6">
	<input class="form-control" type="text" name="tlg_proxy_url" value="<#TLG_PROXY_URL#>" class="input">
 </div>
 <small class="text-muted">server:port</small>
</div>
<div class="form-group">
 <label class="col-lg-4 control-label"><#LANG_TLG_PROXY_LOGIN#></label>
  <div class="input-group col-sm-6">
    <span class="input-group-addon"><span class="glyphicon glyphicon-user"></span></span> 
	<input class="form-control" type="text" name="tlg_proxy_login" value="<#TLG_PROXY_LOGIN#>" class="input">
 </div>
</div>
<div class="form-group">
 <label class="col-lg-4 control-label"><#LANG_TLG_PROXY_PASSWORD#></label>
  <div class="input-group col-sm-6">
    <span class="input-group-addon"><span class="glyphicon glyphicon-lock"></span></span> 
	<input class="form-control" type="password" name="tlg_proxy_password" value="<#TLG_PROXY_PASSWORD#>" class="input">
 </div>
</div>
</div>

<div class="form-group">
 <label class="control-label">Log level
 <span data-toggle="tooltip" data-placement="right" data-title="<#LANG_HELP_LOG_LEVEL#>">
 <i class="glyphicon glyphicon-info-sign text-primary"></i>
 </label>
  <div class="col-lg-6">
    <select name="tlg_debug" class="form-control" id="tlg_debug">
		<option value="0"[#if TLG_DEBUG=="0"#] selected[#endif#]>Info</option>
		<option value="1"[#if TLG_DEBUG=="1"#] selected[#endif#]>Debug</option>
		<option value="2"[#if TLG_DEBUG=="2"#] selected[#endif#]>Warning</option>
	</select>
  </div>
</div>

<div class="form-group">
 <label class="control-label">IP version
 <span data-toggle="tooltip" data-placement="right" data-title="<#LANG_HELP_IPRESOLV#>">
 <i class="glyphicon glyphicon-info-sign text-primary"></i>
 </label>
  <div class="col-lg-6">
    <select name="tlg_ipresolv" class="form-control" id="tlg_ipresolv">
		<option value="any"[#if TLG_IPRESOLV=="any"#] selected[#endif#]>Any</option>
		<option value="ipv4"[#if TLG_IPRESOLV=="ipv4"#] selected[#endif#]>IPv4</option>
		<option value="ipv6"[#if TLG_IPRESOLV=="ipv6"#] selected[#endif#]>IPv6</option>
	</select>
  </div>
</div>
<label class="control-label" style="visibility:hidden">"<#TLG_test#>"</label>
<div class="form-actions">
<button type="submit" name="subm" value="Submit" class="btn btn-primary"><#LANG_UPDATE#></button>
<input type="hidden" name="view_mode" value="update_settings">
<input type="hidden" name="mode" value="update">
<input type="hidden" name="tab" value="<#TAB#>"> 
</div>
</fieldset>
</form>
</div>
<br/>

<ul class="nav nav-tabs">
 <li [#if TAB=="" || TAB=="users"#] class="active"[#endif#]><a href="?tab=users"><span class="glyphicon glyphicon-user"></span> <#LANG_MODULE_USERS#></a> </li>
 <li [#if TAB=="cmd"#] class="active"[#endif#]><a href="?tab=cmd"><span class="glyphicon glyphicon-th"></span> <#LANG_TLG_COMMANDS#></a> </li> 
 <li [#if TAB=="events"#] class="active"[#endif#]><a href="?tab=events"><span class="glyphicon glyphicon-tasks"></span> <#LANG_TLG_EVENTS#></a> </li> 
 <li [#if TAB=="history"#] class="active"[#endif#]><a href="?tab=history"><span class="glyphicon glyphicon-list-alt"></span> <#LANG_TLG_HISTORY#></a> </li> 
 <li [#if TAB=="log"#] class="active"[#endif#]><a href="?tab=log"><span class="glyphicon glyphicon-list-alt"></span> <#LANG_GENERAL_EVENTS_LOG#></a> </li> 
 <li [#if TAB=="help"#] class="active"[#endif#]><a href="?tab=help"><span class="glyphicon glyphicon-exclamation-sign"></span> <#LANG_TLG_HELP#></a> </li> 
</ul> 

[#if TAB="users" || TAB==""#]
  [#inc search_users.html#] 
[#endif#] 
[#if TAB="cmd"#]
  [#inc search_cmd.html#] 
[#endif#] 
[#if TAB="events"#]
  [#inc search_events.html#] 
[#endif#] 
[#if TAB="history"#]
  [#inc search_history.html#] 
[#endif#] 
[#if TAB="log"#]
  [#inc search_log.html#] 
[#endif#] 
[#if TAB="help"#]
  [#inc help.html#] 
[#endif#] 

<div class="modal fade" id="about" tabindex="-1" role="dialog" aria-labelledby="about1" aria-hidden="true">
<!-- <div id="about" class="modal hide"> -->
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">Telegram bot</h4>
			</div>
			<div class="modal-body">
				<div class="float-right">
				<a href="https://telegram.org/">
					<img src="<#ROOTHTML#>templates/telegram/image.png"  width="48" height="48">
				</a>  
				</div>
                <p class="float-left"> Модуль Telegram бота.<br>
				Обсуждение модуля <a href="http://majordomo.smartliving.ru/forum/viewtopic.php?f=5&t=2768" target="_blank">здесь</a>.<br>
				</p>
				<hr size="1">
				<p class="float-left">
				Поддержать автора материально:
				<ul>
                    <li>Yandex: <a href="https://money.yandex.ru/to/410012076838296/100"  target="_blank">410012076838296</a></li>
                    <li>WebMoney: R366396529511</li>
                    <li><a href="https://connect.smartliving.ru/tasks/50.html"  target="_blank">Connect</a></li>
				</ul>
                </p>
			</div>
			
			<div class="modal-footer">
				<div class="pull-left">Telegram: <a href="https://telegram.me/Eraser1981" target="_blank">@Eraser1981</a> :)</div>
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>
